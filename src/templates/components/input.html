{#
Input Component
Usage:
  {% from "components/input.html" import input %}
  {{ input('email', 'Email Address', type='email', required=True) }}

Parameters:
  - name: Input name attribute (required)
  - label: Label text (required)
  - type: text|email|password|number|url|tel|date|time (default: 'text')
  - value: Input value (default: '')
  - placeholder: Placeholder text (optional)
  - required: Boolean (default: False)
  - disabled: Boolean (default: False)
  - readonly: Boolean (default: False)
  - error: Error message to display (optional)
  - help_text: Help text below input (optional)
  - class: Additional CSS classes (optional)
  - autocomplete: Autocomplete attribute (optional)
  - min: Min value for number/date inputs (optional)
  - max: Max value for number/date inputs (optional)
  - pattern: HTML5 pattern attribute (optional)
#}

{% macro input(
  name,
  label,
  type='text',
  value='',
  placeholder='',
  required=False,
  disabled=False,
  readonly=False,
  error=None,
  help_text=None,
  class='',
  autocomplete='',
  min='',
  max='',
  pattern=''
) %}
  <div class="form-group {{ class }} {% if error %}form-group--error{% endif %}">
    <label for="{{ name }}" class="form-label">
      {{ label }}
      {% if required %}<span class="form-label__required" aria-label="required">*</span>{% endif %}
    </label>
    
    <input type="{{ type }}"
           id="{{ name }}"
           name="{{ name }}"
           class="form-input {% if error %}form-input--error{% endif %}"
           {% if value %}value="{{ value }}"{% endif %}
           {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
           {% if required %}required aria-required="true"{% endif %}
           {% if disabled %}disabled{% endif %}
           {% if readonly %}readonly{% endif %}
           {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %}
           {% if min %}min="{{ min }}"{% endif %}
           {% if max %}max="{{ max }}"{% endif %}
           {% if pattern %}pattern="{{ pattern }}"{% endif %}
           {% if error %}aria-invalid="true" aria-describedby="{{ name }}-error"{% endif %}
           {% if help_text and not error %}aria-describedby="{{ name }}-help"{% endif %}>
    
    {% if help_text and not error %}
      <p id="{{ name }}-help" class="form-help">{{ help_text }}</p>
    {% endif %}
    
    {% if error %}
      <p id="{{ name }}-error" class="form-error" role="alert">
        <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
        {{ error }}
      </p>
    {% endif %}
  </div>
{% endmacro %}
