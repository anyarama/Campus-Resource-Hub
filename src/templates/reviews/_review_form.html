{% from"reviews/_star_rating.html" import render_star_rating %}{% macro render_review_form(resource, existing_review=None, is_edit=False) %}{#
  Review Form Component
  
  Parameters:
  - resource: Resource object being reviewed
  - existing_review: Existing review object (for edit mode)
  - is_edit: Boolean indicating edit mode
#}<div class="card" id="review-form">
  <div class="card-header">
    <h5 class="space-b-0">
      <i class="bi bi-star"></i>
      </h5></div></div>{% if is_edit %}Edit Your Review{% else %}Leave a Review{% endif %}<div class="card-body">
    </div>{% if is_edit %}{{ url_for('reviews.update', review_id=existing_review.review_id) }}" id="reviewForm">
        <input name="_method" type="hidden" value="PUT"/>
    {% else %}{{ url_for('reviews.submit', resource_id=resource.resource_id) }}" id="reviewForm">
    {% endif %}{{ csrf_token() }}">
        
         Rating Selection 
        <div class="space-b-4">
          <label class="form-label fw-bold">
            Your Rating <span class="text-danger">*</span>
          </label>
          <div class="flex">
            </div></div>{{ render_star_rating(
              rating=existing_review.rating if existing_review else 0, 
              interactive=True, 
              size='lg'
            ) }}<span class="ms-3" id="rating-text">
              </span>{% if existing_review %}{{ existing_review.rating }}out of 5
              {% else %}Click to rate
              {% endif %}<small class="form-text">
            How would you rate your experience with this resource?
          </small>
        

         Review Comment 
        <div class="space-b-4">
          <label class="form-label fw-bold" for="comment">
            Your Review <span class="text-danger">*</span>
          </label>
          <textarea class="form-control" id="comment" maxlength="1000" minlength="10" name="comment" placeholder="Share your experience with this resource. What did you like? What could be improved? (10-1000 characters)" required="" rows="5"></textarea></div>{% if existing_review %}{{ existing_review.comment }}{% endif %}<div class="flex">
            <small class="form-text">
              Minimum 10 characters
            </small>
            <small class="text-dim">
              <span id="char-count"></span></small></div>{{ existing_review.comment|length if existing_review else 0 }}/1000 characters
            
          
        

         Guidelines 
        <div class="alert alert-info">
          <h6 class="alert-heading">
            <i class="bi bi-info-circle"></i>Review Guidelines
          </h6>
          <ul class="space-b-0 small">
            <li>Be honest and constructive in your feedback</li>
            <li>Focus on your experience with the resource</li>
            <li>Avoid personal attacks or inappropriate language</li>
            <li>Reviews may be moderated by administrators</li>
          </ul>
        </div>

         Submit Buttons 
        <div class="flex justify-content-end gap-2">
          </div>{% if is_edit %}{{ url_for('resources.detail', resource_id=resource.resource_id) }}#reviews" 
              class="btn btn-secondary">
              Cancel
            
            <button class="btn btn-primary" type="submit">
              <i class="bi bi-check-circle"></i>Update Review
            </button>
          {% else %}<button class="btn btn-secondary" type="reset">
              Clear Form
            </button>
            <button class="btn btn-primary" type="submit">
              <i class="bi bi-send"></i>Submit Review
            </button>
          {% endif %}{% endmacro %}