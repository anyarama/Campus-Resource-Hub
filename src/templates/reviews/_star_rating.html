{% macro render_star_rating(rating, max_rating=5, size='md', show_number=False, interactive=False, input_name='rating') %}{# 
  Star Rating Component
  
  Parameters:
  - rating: Current rating value (1-5)
  - max_rating: Maximum rating (default 5)
  - size: 'sm', 'md', 'lg' (default 'md')
  - show_number: Show numeric rating (e.g.,"4.5") next to stars
  - interactive: Make clickable for input
  - input_name: Name attribute for form input (when interactive=True)
#}{% set size_classes = {
  'sm': 'star-rating-sm',
  'md': 'star-rating-md',
  'lg': 'star-rating-lg'
} %}{% set size_class = size_classes.get(size, 'star-rating-md') %}{{ size_class }}{% if interactive %}star-rating-interactive{% endif %}" 
   {% if interactive %}data-rating="{{ rating or 0 }}"{% endif %}>
  
  {% if interactive %}{# Hidden input to store selected rating #}{{ input_name }}" id="{{ input_name }}" value="{{ rating or 0 }}" required>
  {% endif %}{# Render stars #}{% for i in range(1, max_rating + 1) %}{% if rating %}{% if i <= rating|int %}{# Full star #}{{ i }}"
          {% if interactive %}style="cursor: pointer;"{% endif %}>
      {% elif i - 0.5 <= rating %}{# Half star #}{{ i }}"
          {% if interactive %}style="cursor: pointer;"{% endif %}>
      {% else %}{# Empty star #}{{ i }}"
          {% if interactive %}style="cursor: pointer;"{% endif %}>
      {% endif %}{% else %}{# No rating yet - empty stars #}{{ i }}"
        {% if interactive %}style="cursor: pointer;"{% endif %}>
    {% endif %}{% endfor %}{# Show numeric rating if requested #}{% if show_number and rating %}<span class="ms-2">
      <strong></strong></span>{{"%.1f"|format(rating) }}{% endif %}{% if interactive %}{% endif %}{% endmacro %}{% macro render_rating_summary(average_rating, review_count, size='md') %}{#
  Rating Summary Component
  Shows average rating with star display and review count
  
  Parameters:
  - average_rating: Average rating (e.g., 4.3)
  - review_count: Total number of reviews
  - size: 'sm', 'md', 'lg'
#}<div class="rating-summary">
  </div>{{ render_star_rating(average_rating, size=size, show_number=False) }}<span class="ms-2">
    <strong></strong></span>{{"%.1f"|format(average_rating) if average_rating else 'No ratings' }}{% if review_count %}<span class="text-dim">(</span>{{ review_count }}review{{ 's' if review_count != 1 else '' }})
    {% endif %}{% endmacro %}{% endmacro %}