{% extends "base.html" %}
{% from "_components.html" import form_field, button, card %}

{% block title %}Register - Campus Resource Hub{% endblock %}

{% block main_content %}
<div class="auth-container">
    <div class="auth-card auth-card--wide">
        {% call card(title="Create Your Account") %}
            <form method="POST" action="{{ url_for('auth.register') }}" novalidate class="form">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                
                {{ form_field(
                    type="text",
                    name="name",
                    label="Full Name",
                    value=name or '',
                    required=true,
                    autofocus=true,
                    min_length=2
                ) }}
                
                {{ form_field(
                    type="email",
                    name="email",
                    label="Email Address",
                    value=email or '',
                    required=true
                ) }}
                
                {{ form_field(
                    type="password",
                    name="password",
                    label="Password",
                    required=true,
                    min_length=8,
                    help_text="At least 8 characters with uppercase, lowercase, and digit"
                ) }}
                
                {{ form_field(
                    type="password",
                    name="confirm_password",
                    label="Confirm Password",
                    required=true
                ) }}
                
                <div class="form-group">
                    <label for="role" class="form-label">Role</label>
                    <select class="form-select form-control" id="role" name="role">
                        <option value="student" {% if role == 'student' or not role %}selected{% endif %}>Student</option>
                        <option value="staff" {% if role == 'staff' %}selected{% endif %}>Staff</option>
                        <option value="admin" {% if role == 'admin' %}selected{% endif %}>Admin</option>
                    </select>
                </div>
                
                {{ form_field(
                    type="text",
                    name="department",
                    label="Department (Optional)",
                    value=department or '',
                    placeholder="e.g., Computer Science"
                ) }}
                
                {{ button(
                    text="Create Account",
                    type="submit",
                    variant="primary",
                    full_width=true
                ) }}
            </form>
            
            <div class="auth-divider"></div>
            
            <p class="auth-footer-text">
                Already have an account? 
                <a href="{{ url_for('auth.login') }}" class="link-primary">Login here</a>
            </p>
        {% endcall %}
    </div>
</div>
{% endblock %}
