class n{constructor(t){this.form=t,this.master=t.querySelector("[data-bulk-master]"),this.checkboxes=Array.from(t.querySelectorAll("[data-bulk-checkbox]")),this.countLabel=t.querySelector("[data-bulk-count]"),this.actionInput=t.querySelector("[data-bulk-action-input]"),this.actionButtons=Array.from(t.querySelectorAll("[data-bulk-action]")),this.rows=this.checkboxes.map(e=>e.closest("tr")),this.bindEvents(),this.updateState()}bindEvents(){this.master&&this.master.addEventListener("change",()=>{const t=this.master.checked;this.checkboxes.forEach(e=>{e.checked=t,this.toggleRow(e.closest("tr"),t)}),this.updateState()}),this.checkboxes.forEach(t=>{t.addEventListener("change",()=>{this.toggleRow(t.closest("tr"),t.checked),this.updateState()})}),this.rows.forEach((t,e)=>{const s=this.checkboxes[e];!t||!s||(t.addEventListener("keydown",c=>{c.code==="Space"&&(c.preventDefault(),s.checked=!s.checked,this.toggleRow(t,s.checked),this.updateState())}),t.addEventListener("click",c=>{const a=c.target;a instanceof HTMLInputElement||a&&a.closest("button, a, label")||(s.checked=!s.checked,this.toggleRow(t,s.checked),this.updateState())}))}),this.actionButtons.forEach(t=>{t.addEventListener("click",e=>{if(this.getSelectedCount()===0){e.preventDefault();return}this.actionInput&&(this.actionInput.value=t.value)})})}toggleRow(t,e){t&&t.classList.toggle("is-selected",!!e)}getSelectedCount(){return this.checkboxes.filter(t=>t.checked).length}updateState(){const t=this.getSelectedCount(),e=this.checkboxes.length;this.countLabel&&(this.countLabel.textContent=`${t} selected`),this.master&&(this.master.indeterminate=t>0&&t<e,this.master.checked=t===e&&e>0),this.actionButtons.forEach(s=>{s.disabled=t===0})}}function o(){document.querySelectorAll("[data-bulk-form]").forEach(t=>new n(t))}window.addEventListener("DOMContentLoaded",o);
