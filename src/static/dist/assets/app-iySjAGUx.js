import{C as h}from"./auto-DaF2z4gh.js";class f{constructor(){this.theme=localStorage.getItem("theme")||"light",this.init()}init(){document.documentElement.setAttribute("data-theme",this.theme),this.updateToggleButtons(),this.attachListeners(),this.emitThemeChange()}toggle(){this.theme=this.theme==="light"?"dark":"light",localStorage.setItem("theme",this.theme),document.documentElement.setAttribute("data-theme",this.theme),this.updateToggleButtons(),this.emitThemeChange()}updateToggleButtons(){document.querySelectorAll("[data-theme-toggle]").forEach(e=>{const t=e.querySelector(".theme-icon");t&&(t.classList.contains("bi")?t.className=this.theme==="light"?"bi bi-moon-fill theme-icon":"bi bi-sun-fill theme-icon":t.textContent=this.theme==="light"?"ðŸŒ™":"â˜€ï¸")}),document.body.dataset.theme=this.theme}attachListeners(){document.querySelectorAll("[data-theme-toggle]").forEach(e=>{e.addEventListener("click",()=>this.toggle())})}emitThemeChange(){typeof window<"u"&&window.dispatchEvent(new CustomEvent("crh-theme-change",{detail:{theme:this.theme}}))}}class p{constructor(){this.sidebar=document.querySelector(".app-sidebar"),this.overlay=document.querySelector(".sidebar-overlay"),this.toggleBtn=document.querySelector("[data-sidebar-toggle]"),this.expanded=!1,this.init()}init(){this.sidebar&&(window.innerWidth<768&&this.sidebar.classList.remove("open"),this.attachListeners())}toggle(){var e;window.innerWidth<768?(this.sidebar.classList.toggle("open"),(e=this.overlay)==null||e.classList.toggle("active"),document.body.style.overflow=this.sidebar.classList.contains("open")?"hidden":""):(this.expanded=!this.expanded,this.sidebar.classList.toggle("expanded"))}close(){var e,t;(e=this.sidebar)==null||e.classList.remove("open"),(t=this.overlay)==null||t.classList.remove("active"),document.body.style.overflow=""}attachListeners(){var e,t;(e=this.toggleBtn)==null||e.addEventListener("click",()=>this.toggle()),(t=this.overlay)==null||t.addEventListener("click",()=>this.close()),window.innerWidth<768&&document.querySelectorAll(".app-sidebar a").forEach(s=>{s.addEventListener("click",()=>this.close())}),window.addEventListener("resize",()=>{window.innerWidth>=768&&this.close()})}}class w{constructor(){this.activeModal=null,this.attachListeners()}open(e){const t=document.getElementById(e);if(!t)return;this.activeModal=t,t.classList.add("modal-open"),document.body.style.overflow="hidden";const s=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');s==null||s.focus()}close(e=this.activeModal){e&&(e.classList.remove("modal-open"),document.body.style.overflow="",this.activeModal=null)}attachListeners(){document.addEventListener("click",e=>{const t=e.target.closest("[data-modal-open]");t&&(e.preventDefault(),this.open(t.dataset.modalOpen))}),document.addEventListener("click",e=>{const t=e.target.closest("[data-modal-close]");if(t){e.preventDefault();const s=t.closest(".modal");this.close(s)}}),document.addEventListener("click",e=>{e.target.classList.contains("modal")&&this.close(e.target)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.activeModal&&this.close()})}}class v{constructor(){this.container=this.getOrCreateContainer()}getOrCreateContainer(){let e=document.querySelector(".toast-container");return e||(e=document.createElement("div"),e.className="toast-container",document.body.appendChild(e)),e}show(e,t="info",s=5e3){const r=document.createElement("div");r.className=`toast toast-${t}`;const i={success:"âœ“",error:"âœ•",warning:"âš ",info:"â„¹"};return r.innerHTML=`
      <div class="toast-icon">${i[t]||i.info}</div>
      <div class="toast-content">
        <div class="toast-message">${e}</div>
      </div>
      <button class="toast-close" aria-label="Close">Ã—</button>
    `,this.container.appendChild(r),r.querySelector(".toast-close").addEventListener("click",()=>{this.hide(r)}),s>0&&setTimeout(()=>this.hide(r),s),r}hide(e){e.classList.add("toast-hiding"),setTimeout(()=>e.remove(),300)}success(e,t){return this.show(e,"success",t)}error(e,t){return this.show(e,"error",t)}warning(e,t){return this.show(e,"warning",t)}info(e,t){return this.show(e,"info",t)}}class b{constructor(){this.attachListeners()}switchTab(e){const t=e.closest("[data-tabs]");if(!t)return;const s=e.dataset.tabTrigger,r=document.getElementById(s);r&&(t.querySelectorAll("[data-tab-trigger]").forEach(i=>{i.classList.remove("active"),i.setAttribute("aria-selected","false")}),e.classList.add("active"),e.setAttribute("aria-selected","true"),t.querySelectorAll('[role="tabpanel"]').forEach(i=>{i.classList.remove("active"),i.hidden=!0}),r.classList.add("active"),r.hidden=!1)}attachListeners(){document.addEventListener("click",e=>{const t=e.target.closest("[data-tab-trigger]");t&&(e.preventDefault(),this.switchTab(t))}),document.addEventListener("keydown",e=>{const t=e.target.closest("[data-tab-trigger]");if(!t)return;const s=t.parentElement,r=Array.from(s.querySelectorAll("[data-tab-trigger]")),i=r.indexOf(t);let n=i;if(e.key==="ArrowRight"||e.key==="ArrowDown")e.preventDefault(),n=(i+1)%r.length;else if(e.key==="ArrowLeft"||e.key==="ArrowUp")e.preventDefault(),n=(i-1+r.length)%r.length;else if(e.key==="Home")e.preventDefault(),n=0;else if(e.key==="End")e.preventDefault(),n=r.length-1;else return;r[n].focus(),this.switchTab(r[n])})}}class y{constructor(){this.activeDrawer=null,this.backdrop=null,this.attachListeners()}open(e){const t=document.getElementById(e);if(!t)return;this.activeDrawer=t,t.classList.add("open"),t.setAttribute("aria-hidden","false"),this.backdrop||(this.backdrop=document.createElement("div"),this.backdrop.className="drawer-backdrop",this.backdrop.addEventListener("click",()=>this.close()),document.body.appendChild(this.backdrop)),this.backdrop.classList.add("active"),document.body.style.overflow="hidden";const s=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');s==null||s.focus()}close(e=this.activeDrawer){var t;e&&(e.classList.remove("open"),e.setAttribute("aria-hidden","true"),(t=this.backdrop)==null||t.classList.remove("active"),document.body.style.overflow="",this.activeDrawer=null)}attachListeners(){document.addEventListener("click",e=>{const t=e.target.closest("[data-drawer-open]");t&&(e.preventDefault(),this.open(t.dataset.drawerOpen))}),document.addEventListener("click",e=>{const t=e.target.closest("[data-drawer-close], .drawer-close");if(t){e.preventDefault();const s=t.closest(".drawer");this.close(s)}}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.activeDrawer&&this.close()})}}class L{constructor(){this.drawer=document.querySelector(".filter-drawer"),this.attachListeners()}toggle(){var e;(e=this.drawer)==null||e.classList.toggle("filter-drawer-open")}close(){var e;(e=this.drawer)==null||e.classList.remove("filter-drawer-open")}attachListeners(){document.addEventListener("click",e=>{e.target.closest("[data-filter-toggle]")&&(e.preventDefault(),this.toggle()),e.target.closest("[data-filter-close]")&&(e.preventDefault(),this.close())})}}class E{constructor(){this.activeDropdown=null,this.attachListeners()}toggle(e){const t=document.querySelector(`[data-dropdown-toggle="${e}"]`),s=document.getElementById(e);if(!s)return;const r=s.classList.contains("active");this.closeAll(),r||(s.classList.add("active"),t==null||t.setAttribute("aria-expanded","true"),this.activeDropdown=s)}close(e=this.activeDropdown){if(!e)return;e.classList.remove("active");const t=document.querySelector(`[data-dropdown-toggle="${e.id}"]`);t==null||t.setAttribute("aria-expanded","false"),this.activeDropdown=null}closeAll(){document.querySelectorAll(".dropdown-menu.active").forEach(e=>{this.close(e)})}attachListeners(){document.addEventListener("click",e=>{const t=e.target.closest("[data-dropdown-toggle]");t&&(e.preventDefault(),e.stopPropagation(),this.toggle(t.dataset.dropdownToggle))}),document.addEventListener("click",e=>{this.activeDropdown&&!e.target.closest(".dropdown-menu")&&this.closeAll()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.activeDropdown&&this.closeAll()})}}class k{constructor(){this.attachListeners()}validateField(e){const t=e.value.trim(),s=e.hasAttribute("required"),r=e.pattern,i=e.type;let n=!0,a="";return s&&!t?(n=!1,a="This field is required"):t&&r?new RegExp(r).test(t)||(n=!1,a=e.title||"Invalid format"):i==="email"&&t&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(n=!1,a="Invalid email address")),this.setFieldState(e,n,a),n}setFieldState(e,t,s){const r=e.closest(".form-group");if(!r)return;e.classList.toggle("is-invalid",!t),e.classList.toggle("is-valid",t&&e.value.trim());let i=r.querySelector(".form-error");!t&&s?(i||(i=document.createElement("span"),i.className="form-error",e.parentNode.appendChild(i)),i.textContent=s):i&&i.remove()}attachListeners(){document.addEventListener("blur",e=>{const t=e.target;t.matches("input, textarea, select")&&this.validateField(t)},!0),document.addEventListener("submit",e=>{const t=e.target;if(!t.matches("form"))return;let s=!0;if(t.querySelectorAll("input, textarea, select").forEach(r=>{this.validateField(r)||(s=!1)}),!s){e.preventDefault();const r=t.querySelector(".is-invalid");r==null||r.focus()}})}}const u=["#990000","#B91C1C","#D97706","#2563EB","#10B981","#9333EA"],l={bookings:null,categories:null};let c=null;function g(o){return o?typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o)):null}function C(){const o=document.documentElement.getAttribute("data-theme")==="dark";return{text:o?"#E5E7EB":"#1F2937",grid:o?"rgba(255,255,255,0.08)":"rgba(17,24,39,0.08)",border:o?"rgba(255,255,255,0.25)":"rgba(17,24,39,0.15)",tooltipBg:o?"#111827":"#ffffff"}}function x(o){return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:o.tooltipBg,titleColor:o.text,bodyColor:o.text,borderColor:o.border,borderWidth:1}},interaction:{mode:"index",intersect:!1},scales:{x:{ticks:{color:o.text},grid:{display:!1},border:{color:o.border}},y:{beginAtZero:!0,ticks:{color:o.text},grid:{color:o.grid},border:{color:o.border}}}}}function A(o){return{responsive:!0,maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{color:o.text,usePointStyle:!0}},tooltip:{backgroundColor:o.tooltipBg,titleColor:o.text,bodyColor:o.text,borderColor:o.border,borderWidth:1}}}}function D(o){if(!o)return u;const e=[];for(let t=0;t<o;t+=1)e.push(u[t%u.length]);return e}function m(){var e,t,s,r;if(!c)return;const o=C();if(c.bookings){const i=document.getElementById("chart-bookings");if(i){(e=l.bookings)==null||e.destroy();const n=g(c.bookings);(t=n==null?void 0:n.datasets)!=null&&t.length&&(n.datasets=n.datasets.map(a=>({borderColor:a.borderColor||"#990000",backgroundColor:a.backgroundColor||"rgba(153, 0, 0, 0.15)",borderWidth:a.borderWidth??2,tension:a.tension??.4,fill:a.fill??!0,pointRadius:a.pointRadius??4,pointHoverRadius:a.pointHoverRadius??6,...a}))),l.bookings=new h(i,{type:"line",data:n,options:x(o)})}}if(c.categories){const i=document.getElementById("chart-categories");if(i){(s=l.categories)==null||s.destroy();const n=g(c.categories);(r=n==null?void 0:n.datasets)!=null&&r.length&&(n.datasets=n.datasets.map(a=>{var d;return{backgroundColor:a.backgroundColor||D(((d=a.data)==null?void 0:d.length)||0),borderWidth:a.borderWidth??0,...a}})),l.categories=new h(i,{type:"doughnut",data:n,options:A(o)})}}}function S(o={}){c=o,m()}typeof window<"u"&&(window.initDashboardCharts=S,window.addEventListener("crh-theme-change",()=>{c&&m()}),window.dispatchEvent(new Event("dashboard-charts-ready")));document.addEventListener("DOMContentLoaded",()=>{window.theme=new f,window.sidebar=new p,window.modal=new w,window.toast=new v,window.tabs=new b,window.drawer=new y,window.dropdown=new E,window.filterDrawer=new L,window.formValidator=new k,document.querySelectorAll(".flash-message").forEach(o=>{const e=o.dataset.type||"info",t=o.textContent.trim();t&&window.toast.show(t,e),o.remove()}),console.log("âœ… Enterprise UI initialized")});window.showToast=(o,e,t)=>{var s;return(s=window.toast)==null?void 0:s.show(o,e,t)};window.openModal=o=>{var e;(e=window.modal)==null||e.open(o)};window.closeModal=()=>{var o;(o=window.modal)==null||o.close()};
